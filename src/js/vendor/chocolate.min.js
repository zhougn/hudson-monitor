(function(f){var d=f.choc=f.choc||{};function b(h){for(var i in h){var j=h[i];if(Object.isObject(j)||Object.isArray(j)){h[i]=Object.clone(j,true)}}}var g={extend:function(i){var h=c();this.__prototyping__=true;h.prototype=new this();delete this.__prototyping__;return a(h,i)},include:function(h){return a(this,h)}};function c(){var h=function(){b(this);if(h.__prototyping__){return}if(this.initialize){return this.initialize.apply(this,arguments)}};Object.merge(h,g);return h}function a(h,j){if(!j){return h}if(Object.isArray(j)){j.flatten().forEach(function(k){a(h,k)})}var i=Object.isFunction(j)?j.prototype:j;e.process(h,i,"pre");Object.merge(h.prototype,e.excludeMacroProperties(i));e.process(h,i,"post");return h}d.klass=function(h){return a(c(),h)};var e=d.macro={_allMacros:{pre:{},post:{}},getMacros:function(h){return h==="pre"?this._allMacros.pre:this._allMacros.post},add:function(h,j,i){this.getMacros(i)[h]=j},process:function(h,i,j){Object.each(this.getMacros(j),function(k,l){if(i[k]){l(h,i[k])}})},excludeMacroProperties:function(j){var h={};for(var i in j){if(!this.hasMacro(i)){h[i]=j[i]}}return h},hasMacro:function(h){return !!(this._allMacros.pre[h]||this._allMacros.post[h])}};e.add("Include",a,"pre")})(this);(function(a){choc.macro.add("Alias",function(b,d){var c=b.prototype;Object.each(d,function(f,e){Array.create(e).each(function(g){if(c[f]){c[g]=c[f]}})})});choc.macro.add("Delegate",function(b,d){var c=b.prototype;Object.each(d,function(f,e){Array.create(e).each(function(g){c[g]=function(){var h=this[f];source=h[g];return Object.isFunction(source)?source.apply(h,arguments):source}})})})})(this);(function(){choc.Eventable=choc.klass({_events:{},on:function(c,b){if(Object.isObject(c)){var a=this;Object.each(c,function(d,e){a.on(d,e)});return this}this._events[c]=this._events[c]||[];this._events[c].push(b);return this},trigger:function(d,b,a){var c=this._events[d];if(!c){return this}b=Array.create(b).compact();if(a>0){setTimeout(function(){c.forEach(function(e){e.apply(this,b)},this)}.bind(this),a)}else{c.forEach(function(e){e.apply(this,b)},this)}return this},off:function(b,a){if(arguments.length<2){delete this._events[b];return this}this._events[b]&&this._events[b].remove(function(c){return c===a});return this}})})();(function(){choc.Optionable=choc.klass({initOptions:function(a){this.options=Object.merge({},this.defaultOptions);this.options=Object.merge(this.options,a);if(!this.on){return}for(var c in this.options){if(/^on[A-Z]/.test(c)&&Object.isFunction(this.options[c])){var b=c.replace(/^on([A-Z])/,function(d,e){return e.toLowerCase()});this.on(b,this.options[c]);delete this.options[c]}}}})})();