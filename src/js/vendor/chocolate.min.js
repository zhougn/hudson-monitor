(function(d){var i=d.choc=d.choc||{};function j(k){for(var l in k){var m=k[l];if(Object.isObject(m)||Object.isArray(m)){k[l]=Object.clone(m,true)}}}var e={extend:function(l){var k=g();this.__prototyping__=true;k.prototype=new this();delete this.__prototyping__;return c(k,l)},include:function(k){return c(this,k)}};function g(){var k=function(){j(this);if(k.__prototyping__){return}if(this.initialize){return this.initialize.apply(this,arguments)}};Object.merge(k,e);return k}function c(k,m){if(!m){return k}if(Object.isArray(m)){m.flatten().forEach(function(n){c(k,n)})}var l=Object.isFunction(m)?m.prototype:m;b(k,a(l));Object.merge(k.prototype,h(l));return k}function b(k,l){Object.each(l,function(m,n){f[m](k,n)})}function h(m){var k={};for(var l in m){if(!f[l]){k[l]=m[l]}}return k}function a(m){var k={};for(var l in m){if(f[l]){k[l]=m[l]}}return k}var f={Include:c};i.klass=function(k){return c(g(),k)}})(this);(function(){choc.Eventable=choc.klass({_events:{},on:function(c,b){if(Object.isObject(c)){var a=this;Object.each(c,function(d,e){a.on(d,e)});return this}this._events[c]=this._events[c]||[];this._events[c].push(b);return this},trigger:function(d,b,a){var c=this._events[d];if(!c){return this}b=Array.create(b).compact();if(a>0){setTimeout(function(){c.forEach(function(e){e.apply(this,b)},this)}.bind(this),a)}else{c.forEach(function(e){e.apply(this,b)},this)}return this},off:function(b,a){if(arguments.length<2){delete this._events[b];return this}this._events[b]&&this._events[b].remove(function(c){return c===a});return this}})})();(function(){choc.Optionable=choc.klass({initOptions:function(a){this.options=Object.merge({},a);if(!this.on){return}for(var c in this.options){if(/^on[A-Z]/.test(c)&&Object.isFunction(this.options[c])){var b=c.replace(/^on([A-Z])/,function(d,e){return e.toLowerCase()});this.on(b,this.options[c]);delete this.options[c]}}}})})();